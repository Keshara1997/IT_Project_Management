"use strict";!function(e,n){var t,a,o;function r(e,n){var t=[],a=moment(e.start.toUTCString());return n||t.push("<strong>"+a.format("HH:mm")+"</strong> "),e.isPrivate?(t.push('<span class="calendar-font-icon ic-lock-b"></span>'),t.push(" Private")):(e.isReadOnly?t.push('<span class="calendar-font-icon ic-readonly-b"></span>'):e.recurrenceRule?t.push('<span class="calendar-font-icon ic-repeat-b"></span>'):e.attendees.length?t.push('<span class="calendar-font-icon ic-user-b"></span>'):e.location&&t.push('<span class="calendar-font-icon ic-location-b"></span>'),t.push(" "+e.title)),t.join("")}function l(e){var n=$(e.target).closest('a[role="menuitem"]')[0],a=p(n),o=t.getOptions(),r="";switch(console.log(n),console.log(a),a){case"toggle-daily":r="day";break;case"toggle-weekly":r="week";break;case"toggle-monthly":o.month.visibleWeeksCount=0,r="month";break;case"toggle-weeks2":o.month.visibleWeeksCount=2,r="month";break;case"toggle-weeks3":o.month.visibleWeeksCount=3,r="month";break;case"toggle-narrow-weekend":o.month.narrowWeekend=!o.month.narrowWeekend,o.week.narrowWeekend=!o.week.narrowWeekend,r=t.getViewName(),n.querySelector("input").checked=o.month.narrowWeekend;break;case"toggle-start-day-1":o.month.startDayOfWeek=o.month.startDayOfWeek?0:1,o.week.startDayOfWeek=o.week.startDayOfWeek?0:1,r=t.getViewName(),n.querySelector("input").checked=o.month.startDayOfWeek;break;case"toggle-workweek":o.month.workweek=!o.month.workweek,o.week.workweek=!o.week.workweek,r=t.getViewName(),n.querySelector("input").checked=!o.month.workweek}t.setOptions(o,!0),t.changeView(r,!0),m(),h(),k()}function c(e){switch(p(e.target)){case"move-prev":t.prev();break;case"move-next":t.next();break;case"move-today":t.today();break;default:return}h(),k()}function i(){var e=$("#new-schedule-title").val(),n=$("#new-schedule-location").val(),a=document.getElementById("new-schedule-allday").checked,r=(void 0).getStartDate(),l=(void 0).getEndDate(),c=o||CalendarList[0];e&&(t.createSchedules([{id:String(chance.guid()),calendarId:c.id,title:e,isAllDay:a,start:r,end:l,category:a?"allday":"time",dueDateClass:"",color:c.color,bgColor:c.bgColor,dragBgColor:c.bgColor,borderColor:c.borderColor,raw:{location:n},state:"Busy"}]),$("#modal-new-schedule").modal("hide"))}function d(e){!function(e){var n=document.getElementById("calendarName"),t=findCalendar(e),a=[];a.push('<span class="calendar-bar" style="background-color: '+t.bgColor+"; border-color:"+t.borderColor+';"></span>'),a.push('<span class="calendar-name">'+t.name+"</span>"),n.innerHTML=a.join(""),o=t}(p($(e.target).closest('a[role="menuitem"]')[0]))}function s(e){var n=e.start?new Date(e.start.getTime()):new Date,a=e.end?new Date(e.end.getTime()):moment().add(1,"hours").toDate();t.openCreationPopup({start:n,end:a})}function u(e){var n=e.target.value,t=e.target.checked,a=document.querySelector(".lnb-calendars-item input"),o=Array.prototype.slice.call(document.querySelectorAll("#calendarList input")),r=!0;"all"===n?(r=t,o.forEach((function(e){var n=e.parentNode;e.checked=t,n.style.backgroundColor=t?n.style.borderColor:"transparent"})),CalendarList.forEach((function(e){e.checked=t}))):(findCalendar(n).checked=t,r=o.every((function(e){return e.checked})),a.checked=!!r),g()}function g(){var e=Array.prototype.slice.call(document.querySelectorAll("#calendarList input"));CalendarList.forEach((function(e){t.toggleSchedules(e.id,!e.checked,!1)})),t.render(!0),e.forEach((function(e){var n=e.nextElementSibling;n.style.backgroundColor=e.checked?n.style.borderColor:"transparent"}))}function m(){var e,n=document.getElementById("calendarTypeName"),a=document.getElementById("calendarTypeIcon"),o=t.getOptions(),r=t.getViewName();"day"===r?(r="Daily",e="calendar-icon ic_view_day"):"week"===r?(r="Weekly",e="calendar-icon ic_view_week"):2===o.month.visibleWeeksCount?(r="2 weeks",e="calendar-icon ic_view_week"):3===o.month.visibleWeeksCount?(r="3 weeks",e="calendar-icon ic_view_week"):(r="Monthly",e="calendar-icon ic_view_month"),n.innerHTML=r,a.className=e}function h(){var e=document.getElementById("renderRange"),n=t.getOptions(),a=t.getViewName(),o=[];"day"===a?o.push(moment(t.getDate().getTime()).format("YYYY.MM.DD")):"month"===a&&(!n.month.visibleWeeksCount||n.month.visibleWeeksCount>4)?o.push(moment(t.getDate().getTime()).format("YYYY.MM")):(o.push(moment(t.getDateRangeStart().getTime()).format("YYYY.MM.DD")),o.push(" ~ "),o.push(moment(t.getDateRangeEnd().getTime()).format(" MM.DD"))),e.innerHTML=o.join("")}function k(){t.clear(),generateSchedule(t.getViewName(),t.getDateRangeStart(),t.getDateRangeEnd()),t.createSchedules(ScheduleList),g()}function p(e){return e.dataset?e.dataset.action:e.getAttribute("data-action")}(t=new n("#calendar",{defaultView:"week",useCreationPopup:!0,useDetailPopup:!0,calendars:CalendarList,template:{milestone:function(e){return'<span class="calendar-font-icon ic-milestone-b"></span> <span style="background-color: '+e.bgColor+'">'+e.title+"</span>"},allday:function(e){return r(e,!0)},time:function(e){return r(e,!1)}}})).on({clickMore:function(e){console.log("clickMore",e)},clickSchedule:function(e){console.log("clickSchedule",e)},clickDayname:function(e){console.log("clickDayname",e)},beforeCreateSchedule:function(e){console.log("beforeCreateSchedule",e),function(e){var n=e.calendar||findCalendar(e.calendarId),a={id:String(chance.guid()),title:e.title,isAllDay:e.isAllDay,start:e.start,end:e.end,category:e.isAllDay?"allday":"time",dueDateClass:"",color:n.color,bgColor:n.bgColor,dragBgColor:n.bgColor,borderColor:n.borderColor,location:e.location,raw:{class:e.raw.class},state:e.state};n&&(a.calendarId=n.id,a.color=n.color,a.bgColor=n.bgColor,a.borderColor=n.borderColor);t.createSchedules([a]),g()}(e)},beforeUpdateSchedule:function(e){var n=e.schedule,a=e.changes;console.log("beforeUpdateSchedule",e),t.updateSchedule(n.id,n.calendarId,a),g()},beforeDeleteSchedule:function(e){console.log("beforeDeleteSchedule",e),t.deleteSchedule(e.schedule.id,e.schedule.calendarId)},afterRenderSchedule:function(e){e.schedule},clickTimezonesCollapseBtn:function(e){return console.log("timezonesCollapsed",e),e?t.setTheme({"week.daygridLeft.width":"77px","week.timegridLeft.width":"77px"}):t.setTheme({"week.daygridLeft.width":"60px","week.timegridLeft.width":"60px"}),!0}}),a=tui.util.throttle((function(){t.render()}),50),e.cal=t,m(),h(),k(),$("#menu-navi").on("click",c),$('.dropdown-menu a[role="menuitem"]').on("click",l),$("#lnb-calendars").on("change",u),$("#btn-save-schedule").on("click",i),$("#btn-new-schedule").on("click",s),$("#dropdownMenu-calendars-list").on("click",d),e.addEventListener("resize",a)}(window,tui.Calendar),function(){var e=document.getElementById("calendarList"),n=[];CalendarList.forEach((function(e){n.push('<div class="lnb-calendars-item"><label><input type="checkbox" class="tui-full-calendar-checkbox-round" value="'+e.id+'" checked><span style="border-color: '+e.borderColor+"; background-color: "+e.borderColor+';"></span><span>'+e.name+"</span></label></div>")})),e.innerHTML=n.join("\n")}();